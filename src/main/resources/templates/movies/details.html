<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${movie.title}">Фильм</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>

<header class="topbar">
    <div class="brand"><a th:href="@{/}">Cinema</a></div>
    <nav>
        <a th:href="@{/movies}">Фильмы</a>
        <a th:href="@{/about}">О кинотеатре</a>
        <span th:if="${#authorization.expression('hasRole(''USER'')')}">
            <a th:href="@{/user/profile}">Профиль</a>
        </span>
        <span th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
            <a th:href="@{/admin/movies}">Админ</a>
        </span>
    </nav>
    <div class="auth">
        <a th:if="${#authorization.expression('isAnonymous()')}"
           th:href="@{/login}">Войти</a>
        <span th:if="${#authorization.expression('isAuthenticated()')}">
            <span th:text="${#authentication.name}">user</span>
            <form th:action="@{/logout}" method="post" class="inline">
                <button type="submit" class="link-button">Выйти</button>
            </form>
        </span>
    </div>
</header>

<main class="container movie-details" th:object="${movie}">
    <section class="movie-hero">
        <div class="movie-hero-poster">
            <img th:if="*{posterUrl != null}" th:src="*{posterUrl}" alt="Poster">
            <div th:if="*{posterUrl == null}" class="movie-poster-placeholder">
                НЕТ ПОСТЕРА
            </div>
        </div>
        <div class="movie-hero-info">
            <h1 th:text="*{title}">Название</h1>

            <div class="movie-hero-actions">
                <form th:if="${#authorization.expression('hasRole(''USER'')')}"
                      th:action="@{/user/favorites/{id}/toggle(id=*{id})}"
                      method="post"
                      class="inline">

                    <button type="submit"
                            class="btn btn-secondary btn-small"
                            th:text="${isFavorite} ? 'Убрать из избранного' : 'В избранное'">
                        В избранное
                    </button>
                </form>
            </div>

            <p><strong>Жанр:</strong>
                <span th:text="*{genre}">Жанр</span>
            </p>

            <p><strong>Режиссёр:</strong>
                <span th:text="*{director}">Режиссёр</span>
            </p>

            <p><strong>Страна:</strong>
                <span th:text="*{country}">Страна</span>
            </p>

            <p><strong>Длительность:</strong>
                <span th:text="*{durationMinutes != null ? durationMinutes : '—'}">120</span> мин
            </p>
        </div>

    </section>
    <section class="movie-description">
        <h2>Описание</h2>
        <p th:text="*{description}">
            Описание фильма...
        </p>
    </section>

    <!-- дальше можно оставить твой блок с сеансами как есть -->
</main>
</body>
</html>
