<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–í—Ö–æ–¥</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>

<header class="topbar">
    <div class="brand">
        <a th:href="@{/}">Absolute cinema</a>
    </div>

    <nav>
        <a th:href="@{/movies}">–§–∏–ª—å–º—ã</a>
        <a th:href="@{/about}">–û –∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–µ</a>
        <a th:href="@{/tickets/guest}">–ú–æ–∏ –±–∏–ª–µ—Ç—ã</a>

        <!-- –ü—É–Ω–∫—Ç "–ü—Ä–æ—Ñ–∏–ª—å" ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ USER -->
        <span th:if="${#authorization.expression('hasRole(''USER'')')}">
            <a th:href="@{/user/profile}">–ü—Ä–æ—Ñ–∏–ª—å</a>
        </span>

        <!-- –ü—É–Ω–∫—Ç "Admin" ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è ADMIN -->
        <span th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
            <a th:href="@{/admin/movies}">Admin</a>
        </span>
    </nav>

    <div class="auth">
        <!-- –°—Å—ã–ª–∫–∞ "Login" —Ç–æ–ª—å–∫–æ –¥–ª—è –≥–æ—Å—Ç—è -->
        <a th:if="${#authorization.expression('isAnonymous()')}"
           th:href="@{/login}">–í–æ–π—Ç–∏</a>

        <!-- –ò–º—è + Logout –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ -->
        <span th:if="${#authorization.expression('isAuthenticated()')}">
            <span th:text="${#authentication.name}">user</span>
            <form th:action="@{/logout}" method="post" class="inline">
                <button type="submit" class="link-button">–í—ã–π—Ç–∏</button>
            </form>
        </span>
        <button type="button" class="theme-toggle" onclick="toggleTheme()">
            üåô –¢—ë–º–Ω–∞—è
        </button>
    </div>
</header>

<main class="auth-page">
    <section class="auth-card">
        <h1 class="auth-title">–í—Ö–æ–¥</h1>
        <p class="auth-subtitle">
            –í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–∫—É–ø–∞—Ç—å –±–∏–ª–µ—Ç—ã –æ–Ω–ª–∞–π–Ω, –≤–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–æ—Å–µ—â–µ–Ω–∏–π
            –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–∑–±—Ä–∞–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å–º–∞–º–∏.
        </p>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö / –≤—ã—Ö–æ–¥–µ -->
        <p class="form-error" th:if="${param.error}">
            –ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å.
        </p>
        <p class="form-error" th:if="${param.logout}">
            –í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞.
        </p>
        <p class="form-success" th:if="${param.registered}">
            –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, —Ç–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏.
        </p>

        <!-- –í–ê–ñ–ù–û: action –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å loginProcessingUrl –≤ SecurityConfig -->
        <!-- –ï—Å–ª–∏ –≤ SecurityConfig —Å—Ç–æ–∏—Ç .loginProcessingUrl("/process-login"), —Ç–æ –∑–¥–µ—Å—å /process-login -->
        <form th:action="@{/process-login}" method="post">
            <div class="form-group">
                <label for="username">–õ–æ–≥–∏–Ω</label>
                <input id="username"
                       type="text"
                       name="username"
                       autocomplete="username"
                       required>
            </div>

            <div class="form-group">
                <label for="password">–ü–∞—Ä–æ–ª—å</label>
                <input id="password"
                       type="password"
                       name="password"
                       autocomplete="current-password"
                       required>
            </div>

            <div class="auth-actions">
                <button type="submit" class="btn btn-primary btn-full">
                    –í–æ–π—Ç–∏
                </button>
            </div>
        </form>

        <div class="auth-secondary" style="margin-top: 12px;">
            –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?
            <a th:href="@{/register}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>
        </div>

        <p class="auth-secondary" style="margin-top: 12px;">
            –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:<br>
            <strong>admin / admin</strong> (ADMIN + USER)<br>
            <strong>user / user</strong> (USER)
        </p>
    </section>
</main>
<script th:src="@{/js/theme.js}"></script>
</body>
</html>
